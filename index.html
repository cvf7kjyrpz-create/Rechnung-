<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no">
<title>Rechnungs App</title>

<style>
body{margin:0;background:#000;color:#fff;font-family:Arial,sans-serif;}
#topbar{position:fixed;top:0;left:0;right:0;padding:12px;background:#000;border-bottom:1px solid #333;z-index:1000;}
#navButtons{display:flex;gap:6px;flex-wrap:wrap;}
#navButtons button{flex:1;padding:8px;font-size:11px;border-radius:10px;border:1px solid #444;background:#000;color:#bbb;font-weight:bold;}
#navButtons button.active{background:#222;color:#fff;}
#content{position:fixed;top:64px;left:0;right:0;bottom:0;overflow:auto;padding:10px;box-sizing:border-box;}
.section{display:none;}
.section.active{display:block;}
table{width:100%;border-collapse:collapse;font-size:11px;}
th,td{border-bottom:1px solid #222;padding:4px;white-space:nowrap;}
th{background:#111;color:#bbb;}
.invoice-row:hover{background:#111;}
.iconBtn{cursor:pointer;margin-right:6px;}
</style>
</head>
<body>

<div id="topbar">
  <div id="navButtons">
    <button data-view="viewInvoices" class="active">Verk√§ufe</button>
    <button data-view="viewEditor">Neue Rechnung</button>
    <button data-view="viewCustomers">Kunden</button>
    <button data-view="viewSettings">Einstellungen</button>
    <button data-view="viewBackup">Sichern / Laden</button>
  </div>
</div>

<div id="content">
<div id="viewInvoices" class="section active">
<table>
<thead>
<tr>
  <th>Art.-Nr</th>
  <th>Rechnung</th>
  <th>Artikel</th>
  <th>Menge</th>
  <th>Preis</th>
  <th>Datum</th>
  <th>Ort</th>
  <th>Aktionen</th>
</tr>
</thead>
<tbody id="invoiceTableBody"></tbody>
</table>
</div>

<div id="viewEditor" class="section"><div>Editor unver√§ndert</div></div>
<div id="viewCustomers" class="section"><div>Kunden unver√§ndert</div></div>
<div id="viewSettings" class="section"><div>Einstellungen unver√§ndert</div></div>
<div id="viewBackup" class="section"><div>Backup unver√§ndert</div></div>

</div>

<script>
let invoices = JSON.parse(localStorage.getItem("rechnungInvoices")||"[]");

function renderInvoiceList(){
  const tbody=document.getElementById("invoiceTableBody");
  tbody.innerHTML="";
  invoices.forEach(inv=>{
    (inv.items||[]).forEach(it=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`
        <td>${it.artnr||""}</td>
        <td>${inv.number||""}</td>
        <td>${it.name||""}</td>
        <td>${it.qty||0}</td>
        <td>${(it.price||0).toFixed(2)} ‚Ç¨</td>
        <td>${inv.date||""}</td>
        <td>${inv.channel||""}</td>
        <td>
          <span class="iconBtn" onclick="viewInvoice('${inv.id}')">üëÅ</span>
          <span class="iconBtn" onclick="editInvoice('${inv.id}')">‚úèÔ∏è</span>
          <span class="iconBtn" onclick="printInvoice('${inv.id}')">üñ®</span>
          <span class="iconBtn" onclick="deleteInvoice('${inv.id}')">üóë</span>
        </td>`;
      tbody.appendChild(tr);
    });
  });
}

function viewInvoice(id){alert("Rechnung ansehen: "+id);}
function editInvoice(id){alert("Rechnung bearbeiten: "+id);}
function printInvoice(id){alert("Rechnung drucken: "+id);}
function deleteInvoice(id){
  if(!confirm("Rechnung wirklich stornieren?"))return;
  invoices=invoices.filter(x=>x.id!==id);
  localStorage.setItem("rechnungInvoices",JSON.stringify(invoices));
  renderInvoiceList();
}

renderInvoiceList();
</script>

</body>
</html>
